
<head>
<script type="text/javascript" src="http://code.jquery.com/jquery-2.1.0.min.js"></script>
<script type="text/javascript" src="http://code.jquery.com/ui/1.11.2/jquery-ui.js"></script>
<style>
.box{
	font-family:Arial, Helvetica, sans-serif;
	background-color:#c3ffc4;
	border-radius:10px;
	border:1px solid #999;
	padding:10px;
}
</style>
</head>

<img src="http://i41.tinypic.com/2d14ww2.jpg" border="0" usemap="#Map" class="map" />

<map name="Map" id="Map">
      <area shape="rect" shape="rect" coords="84,45,225,88" href="#" class="element" id="elem0" />
      <area shape="rect" shape="rect" coords="86,190,222,229" href="#" class="element" id="elem1" />
</map>

<div id="box0" class="box">    
Box one
</div>
<div id="box1" class="box"> 
Box two
</div> 

<script>
$(function() {

	$('.box').each(function(k,v){
	
		var box = $(this).dialog({ modal:true, resizable:false, autoOpen:false });
		box.data("count", 0);
		
		var el = document.getElementById( "elem"+k );
		//alert(el.id);
		
		$(this).parent().find('.ui-dialog-titlebar-close').hide();
		
		box.mouseenter(function() {
			box.data("count", box.data("count") + 1);
			box.text( "box enter " + box.data("count") );
		}).mouseleave(function(e) {
			box.data("count", box.data("count") - 1);
			box.text( "box leave " + box.data("count") );
			
			//alert(e.relatedTarget);
			
			if(e.relatedTarget.id != el.id)
			{
				//alert('hi');
				if(box.data("count") == 0) {
					box.dialog( "close" );
				}
			}
		});
		
		
		$( "#elem"+k ).mouseenter(function(e) {
		

		
			//box.dialog( "option", { position: [e.pageX, e.pageY] });
			
			box.data("count", box.data("count") + 1);
			
			box.dialog( "open" );
			
			

			if(e.relatedTarget != v)
			{
				//alert('not transfer');
				
				box.position({
					my: "left bottom",
					of: e,
					collision: "fit"
				});
			}
			
			box.text( "element enter " + box.data("count") );
		
			
		}).mouseleave(function(e) {
			//alert( e.relatedTarget.id);// + " 2:" + $(this).element.nodeName );
			//alert( e.relatedTarget.id + " " + v.id );
			
			box.data( "count", box.data("count") - 1 );
			
			box.text( "element leave " + box.data("count") );
			
			if(e.relatedTarget != v)
			{
				if(box.data("count") == 0) {
					box.dialog( "close" );
				}
			}
		});
		
		
		
	});

});
</script>


